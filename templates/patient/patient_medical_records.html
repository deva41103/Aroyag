<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Medical Records ‚Äì AROgyam</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen">

<!-- Header -->
<header class="bg-white shadow">
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-xl font-bold text-teal-700">My Medical Timeline</h1>
    <a href="/patient/dashboard" class="text-sm text-teal-600 font-medium">
      ‚Üê Back to Dashboard
    </a>
  </div>
</header>

<!-- Content -->
<main class="max-w-4xl mx-auto p-4">

  <p class="text-gray-600 mb-8">
    Your complete medical history (read-only)
  </p>

  {% if records %}

  <!-- Timeline -->
  <div class="relative border-l-4 border-teal-600 pl-6 space-y-10">

    {% for r in records %}
    <div class="relative">

      <!-- Timeline Dot -->
      <span class="absolute -left-[14px] top-2 w-4 h-4 bg-teal-600 rounded-full"></span>

      <!-- Record Card -->
      <div class="bg-white rounded-xl shadow p-6">

        <!-- Date -->
        <p class="text-sm text-gray-500 mb-1">
          {{ r.created_at[:10] }}
        </p>

        <!-- Title -->
        <h3 class="text-lg font-semibold text-gray-800">
          {{ r.title }}
        </h3>

        <!-- Doctor Info -->
        <p class="text-sm text-gray-700 mt-1">
          üë®‚Äç‚öïÔ∏è
          {% if r.users and r.users.doctor_profiles %}
            Dr. {{ r.users.doctor_profiles.full_name }}
            {% if r.users.doctor_profiles.specialization %}
              ({{ r.users.doctor_profiles.specialization }})
            {% endif %}
          {% else %}
            Doctor information not available
          {% endif %}
        </p>

        <!-- Description -->
        <p class="text-gray-700 mt-4">
          {{ r.description }}
        </p>

        <!-- Attachments -->
        <div class="mt-4">
          <h4 class="text-sm font-semibold text-gray-600 mb-2">
            Attachments
          </h4>

          {% if r.medical_attachments %}
            <ul class="space-y-2">
              {% for a in r.medical_attachments %}
                <li>
                  <a
                    href="{{ a.file_url }}"
                    target="_blank"
                    class="text-teal-600 hover:underline text-sm"
                  >
                    üìé {{ a.file_name }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="text-sm text-gray-500">No attachments</p>
          {% endif %}
        </div>

      </div>
    </div>
    {% endfor %}

  </div>

  {% else %}
    <div class="bg-white rounded-xl shadow p-6 text-center text-gray-600">
      No medical records available.
    </div>
  {% endif %}

</main>

</body>
</html>
